esphome:
  name: htest
  platform: ESP32
  board: nodemcu-32s


# Enable logging
logger:

# Enable Home Assistant API
# api:

#ota:

display:
  - platform: tm1638
    id: primarydisplay
    stb_pin: 5 #TM1638 STB
    clk_pin: 18 #TM1638 CLK
    dio_pin: 23 #TM1638 DIO
    update_interval: .01s
    intensity: 5
    lambda: |-
        it.printf("%u", millis());

switch:
  - platform: tm1638
    id: led0
    led: 0
  - platform: tm1638
    id: led1
    led: 1
  - platform: tm1638
    id: led2
    led: 2
  - platform: tm1638
    id: led3
    led: 3
  - platform: tm1638
    id: led4
    led: 4
  - platform: tm1638
    id: led5
    led: 5
  - platform: tm1638
    id: led6
    led: 6
  - platform: tm1638
    id: led7
    led: 7


binary_sensor:
  - platform: tm1638
    id: key0
    key: 0
    on_press:
      then:
        - switch.turn_on: led0
        - switch.turn_on: led1
        - switch.turn_on: led2
        - switch.turn_on: led3
        - switch.turn_on: led4
        - switch.turn_on: led5
        - switch.turn_on: led6
        - switch.turn_on: led7


    on_release:
      then:
        - switch.turn_off: led0
        - switch.turn_off: led1
        - switch.turn_off: led2
        - switch.turn_off: led3
        - switch.turn_off: led4
        - switch.turn_off: led5
        - switch.turn_off: led6
        - switch.turn_off: led7
