esphome:
    name: fantest
    platform: ESP32
    board: nodemcu-32s

fan:
    - platform: speed
      id: fan_speed
      icon: mdi:weather-windy
      output: pca_6
      speed_count: 10
      off_speed_cycle: false
      name: Living Room Fan 2
      oscillation_output: gpio_19
      direction_output: gpio_26
      oscillation_state_topic: oscillation/state/topic
      oscillation_command_topic: oscillation/command/topic
      speed_level_state_topic: speed_level/state/topic
      speed_level_command_topic: speed_level/command/topic
      speed_state_topic: speed/state/topic
      speed_command_topic: speed/command/topic
      on_speed_set:
        then:
          - logger.log: Fan speed was changed!