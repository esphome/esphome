esphome:
    name: fantest

esp32:
  board: esp32dev
  framework:
    type: esp-idf

output:
  - platform: ledc
    id: my_output_id
    inverted: false
    pin: GPIO19

  - platform: gpio
    pin: 2
    id: boardled


logger:

fan:
    - platform: speed
      id: test_speed_fan
      speed_count: 3
      off_speed_cycle: True
      output: my_output_id
      on_speed_set:
        then:
          - logger.log: Fan speed was changed!

binary_sensor:
  - platform: gpio
    name: Cycle Fan Speed
    id: cyclespeed
    pin:
      number: 18
      mode:
        input: true
        pulldown: true

    filters:
      - delayed_on: 10ms

    # Optional variables:
    on_press:
      - fan.cycle_speed: test_speed_fan
      - logger.log: "Cycle speed clicked"
