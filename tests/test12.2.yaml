---
nrf52:
  # board: adafruit_itsybitsy_nrf52840
  board: adafruit_feather_nrf52840
  # board: nrf52840dk_nrf52840
  # board: nrf5340dk_nrf5340_cpuapp

  # bootloader: adafruit
  # bootloader: mcuboot

esphome:
  name: nrf52-test-nrf

logger:
  level: DEBUG
  logs:
    switch: NONE

switch:
  - platform: gpio
    pin:
      number: 15
      inverted: true
      mode:
        output: true
    id: gpio_15
    restore_mode: RESTORE_DEFAULT_OFF

interval:
  - interval: 500ms
    then:
      - switch.toggle: gpio_15

output:
  - platform: gpio
    pin:
      number: 14
      inverted: true
      mode:
        output: true
    id: rest_gpio
  - platform: gpio
    pin:
      inverted: true
      number: 13
      mode:
        output: true
    id: ldo

dfu_mode:
  reset_output: rest_gpio

ota:
  - platform: zephyr_mcumgr
    usb_cdc: True
    on_begin:
      then:
        - logger.log: "OTA start"
    on_progress:
      then:
        - logger.log:
            format: "OTA progress %0.1f%%"
            args: ["x"]
    on_end:
      then:
        - logger.log: "OTA end"
    on_error:
      then:
        - logger.log:
            format: "OTA update error %d"
            args: ["x"]
    on_state_change:
      then:
        - if:
            condition:
              lambda: return state == ota::OTA_STARTED;
            then:
              - logger.log: "OTA start"

zephyr_ble_server:

zephyr_ble_nus:
  log: true

zephyr_debug:

debug:

sensor:
  - platform: uptime
    name: Uptime Sensor
  - platform: adc
    pin: VDDHDIV5
    name: "VDDH Voltage"
    filters:
      - multiply: 5
  - platform: adc
    pin: VDD
    name: "VDD Voltage"
  - platform: adc
    pin: AIN0
    name: "AIN0 Voltage"
  - platform: ads1115
    multiplexer: 'A0_GND'
    gain: 6.144
    name: "ADS1115 Channel A0-GND"
    update_interval: 1s
  - platform: ads1115
    multiplexer: 'A1_GND'
    gain: 6.144
    name: "ADS1115 Channel A1-GND"
    update_interval: 1s
  - platform: ads1115
    multiplexer: 'A2_GND'
    gain: 6.144
    name: "ADS1115 Channel A2-GND"
    update_interval: 1s
  - platform: ads1115
    multiplexer: 'A3_GND'
    gain: 6.144
    name: "ADS1115 Channel A3-GND"
    update_interval: 1s

deep_sleep:

text_sensor:
  - platform: debug
    reset_reason:
      name: "Reset Reason"

i2c:
  sda: P1.04
  scl: P1.06
  scan: false

ads1115:
  - address: 0x48
